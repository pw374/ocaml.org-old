<div class="ocaml_toplevel_module"><div class="info"><div class="info"><code class="code">with_conn</code> opens a connection to the TCP service on <code class="code">host</code> <code class="code">port</code> and
  if successful calls <code class="code">f</code> with In_channel.t and Out_channel.t as arguments.
  The return value of <code class="code">f</code> will be returned by <code class="code">with_conn</code>.<br/>  <code class="code">with_conn</code> raises Connect_timeout if the connection attempt times out.
  Unix_error will be raised if there are any other connect errors.
  Any exceptions raised by <code class="code">f</code> will be re-raised, which may include
  Unix_errors raised by underlying channel read/write calls.<br/>  The <code class="code">In_channel.t</code>, <code class="code">Out_channel.t</code>, and underlying socket
  will be closed by with_conn before it returns.</div></div>
<pre id="20"><span class="EXCEPTIONConnect_timeout"><span class="keyword">exception</span> Connect_timeout</span></pre>
<pre id="19"><span class="VALwith_connection"><span class="keyword">val</span> with_connection</span> : <code class="type">?timeout:Core.Std.Time.Span.t -&gt;
host:string -&gt;
port:int -&gt;
f:(Core.Std.In_channel.t -&gt; Core.Std.Out_channel.t -&gt; 'a) -&gt; unit -&gt; 'a</code></pre>
</div>